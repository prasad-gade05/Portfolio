import{r as c,j as h}from"./vendor-CkF4tzVU.js";import{S as k,F as v,I as R}from"./three-vendor-BZyookkq.js";const A=({skinUrl:M,width:u=300,height:l=400})=>{const m=c.useRef(null),b=c.useRef(null),e=c.useRef({active:!1,startTime:null});c.useEffect(()=>{if(!m.current)return;const t=new k({canvas:m.current,width:u,height:l,skin:M});t.camera.position.set(0,0,50),t.fov=70,t.zoom=.6,t.controls.enableRotate=!0,t.controls.enableZoom=!0,t.controls.enablePan=!1;const x=new R,I=new v((n,d,P)=>{if(x.update(n,P),e.current.active){e.current.startTime===null&&(e.current.startTime=d);const f=1,o=d-e.current.startTime;if(o<f){const r=o/f;n.position.y=Math.sin(r*Math.PI)*10,n.skin.leftLeg.rotation.z=Math.sin(r*Math.PI)*.5,n.skin.rightLeg.rotation.z=-Math.sin(r*Math.PI)*.5,n.skin.leftArm.rotation.z=Math.sin(r*Math.PI)*2,n.skin.rightArm.rotation.z=-Math.sin(r*Math.PI)*2;return}else e.current.active=!1,e.current.startTime=null,n.position.y=0}if(n.parent){let o=n.parent.rotation.y%(2*Math.PI);o<0&&(o+=2*Math.PI),o>Math.PI&&(o-=2*Math.PI);const r=.5;if(Math.abs(o)<r){const i=(o+r)/(2*r);let a=0,p=0;if(i<.2){const s=i/.2;a=-Math.PI*.7*s}else if(i<.8){const s=(i-.2)/.6;a=-Math.PI*.7+Math.sin(s*Math.PI*4)*.2,p=Math.sin(s*Math.PI*4)*.1}else{const s=(i-.8)/.2;a=-Math.PI*.7*(1-s)}n.skin.rightArm.rotation.z=a,n.skin.rightArm.rotation.x=p}else n.skin.rightArm.rotation.z=0,n.skin.rightArm.rotation.x=0}});return t.animation=I,t.autoRotate=!0,t.autoRotateSpeed=.5,b.current=t,()=>{t.dispose()}},[M,u,l]);const g=()=>{e.current&&!e.current.active&&(e.current.active=!0,e.current.startTime=null)};return h.jsxs("div",{style:{position:"relative",width:u,height:l},children:[h.jsx("canvas",{ref:m,style:{display:"block",borderRadius:"8px",cursor:"grab"}}),h.jsx("button",{onClick:g,style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",padding:"8px 16px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"20px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"all 0.2s",zIndex:10},onMouseEnter:t=>t.target.style.backgroundColor="rgba(0, 0, 0, 0.8)",onMouseLeave:t=>t.target.style.backgroundColor="rgba(0, 0, 0, 0.6)",children:"Jump!"})]})};export{A as default};
